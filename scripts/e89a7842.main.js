!function(a){"use strict";function b(){i=new q.Scene,i.fog=new q.Fog(16777215,0,750),c(),d(),e(),f(),document.body.appendChild(k.domElement),a.addEventListener("resize",g,!1)}function c(){l=new r.World,l.quatNormalizeSkip=0,l.quatNormalizeFast=!1;var a=new r.GSSolver;l.defaultContactMaterial.contactEquationStiffness=1e9,l.defaultContactMaterial.contactEquationRegularizationTime=4,a.iterations=7,a.tolerance=.1;var b=!0;l.solver=b?new r.SplitSolver(a):a,l.gravity.set(0,-20,0),l.broadphase=new r.NaiveBroadphase,m=new r.Material("slipperyMaterial");var c=new r.ContactMaterial(m,m,0,.3);l.addContactMaterial(c);var d=5,e=.5;n=new r.Sphere(e),o=new r.RigidBody(d,n,m),o.position.set(w/2,e,x/2),o.linearDamping=.9,l.add(o);var f=new r.Plane,g=new r.RigidBody(0,f,m);g.quaternion.setFromAxisAngle(new r.Vec3(1,0,0),-Math.PI/2),l.add(g);var h=new r.Box(new r.Vec3(w/2,y/2,.1)),i=new r.RigidBody(0,h,m);i.position.set(w/2,y/2,0),l.add(i);var j=new r.RigidBody(0,h,m);j.position.set(0,y/2,x/2),j.quaternion.setFromAxisAngle(new r.Vec3(0,1,0),Math.PI/2),l.add(j);var k=new r.RigidBody(0,h,m);k.position.set(w,y/2,x/2),k.quaternion.setFromAxisAngle(new r.Vec3(0,1,0),-Math.PI/2),l.add(k);var p=new r.RigidBody(0,h,m);p.position.set(w/2,y/2,x),p.quaternion.setFromAxisAngle(new r.Vec3(0,1,0),Math.PI),l.add(p)}function d(){j=new q.PerspectiveCamera(65,a.innerWidth/a.innerHeight,.1,100),p=new t(j,o),i.add(p.getObject())}function e(){var a=q.ImageUtils.loadTexture("images/ba8dd558.floor.png");a.anisotropy=4;var b=new q.PlaneGeometry(w,x,2*w,2*x),c=new q.MeshLambertMaterial({map:a}),d=new q.Mesh(b,c);d.rotation.x=-0.5*Math.PI,d.position.x=w/2,d.position.z=x/2,i.add(d);var e=q.ImageUtils.loadTexture("images/ae7f3cdd.wall.png"),f=new q.PlaneGeometry(w,y,2*w,2*y),g=new q.MeshLambertMaterial({map:e}),h=new q.Mesh(f,g);h.position.x=w/2,h.position.y=y/2,h.position.z=0,i.add(h);var j=new q.Mesh(f,g);j.rotation.y=.5*Math.PI,j.position.x=0,j.position.y=y/2,j.position.z=x/2,i.add(j);var k=new q.Mesh(f,g);k.rotation.y=-0.5*Math.PI,k.position.x=w,k.position.y=y/2,k.position.z=x/2,i.add(k);var l=new q.Mesh(f,g);l.rotation.y=1*Math.PI,l.position.x=w/2,l.position.y=y/2,l.position.z=x,i.add(l);var m=q.ImageUtils.loadTexture("images/96aa4895.ceiling.png"),n=new q.PlaneGeometry(w,x,2*w,2*x),o=new q.MeshLambertMaterial({map:m}),p=new q.Mesh(n,o);p.rotation.x=.5*Math.PI,p.position.x=w/2,p.position.y=y,p.position.z=x/2,i.add(p);var r=q.ImageUtils.loadTexture("images/b2c214e2.art0.jpg"),s=new q.PlaneGeometry(32,24,4,4),t=new q.MeshLambertMaterial({map:r}),u=new q.Mesh(s,t);u.position.x=w/2,u.position.y=20,u.position.z=1;var v=q.ImageUtils.loadTexture("images/a3111cab.person.png"),z=new q.PlaneGeometry(1,2,2,4),A=new q.MeshLambertMaterial({map:v});A.side=q.DoubleSide,A.transparent=!0;var B=new q.Mesh(z,A);B.position.x=3.5,B.position.y=1,B.position.z=2,i.add(B);var C=q.ImageUtils.loadTexture("images/769c51e0.people.png"),D=new q.PlaneGeometry(2,2,4,4),E=new q.MeshLambertMaterial({map:C});E.side=q.DoubleSide,E.transparent=!0;var F=new q.Mesh(D,E);F.position.x=5,F.position.y=1,F.position.z=1,i.add(F);var G=new q.AmbientLight(16777215);i.add(G)}function f(){k=new q.WebGLRenderer({antialias:!0}),k.setClearColor(16777215),k.setSize(a.innerWidth,a.innerHeight)}function g(){j.aspect=a.innerWidth/a.innerHeight,j.updateProjectionMatrix(),k.setSize(a.innerWidth,a.innerHeight)}function h(){s(h),p.enabled&&l.step(u),p.update(Date.now()-v),k.render(i,j),v=Date.now()}var i,j,k,l,m,n,o,p,q=a.THREE,r=a.CANNON,s=a.requestAnimationFrame,t=a.PointerLockControls,u=1/60,v=Date.now(),w=10,x=10,y=5,z=document.getElementById("blocker"),A=document.getElementById("instructions"),B="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;if(B){var C=document.body,D=function(){var a=document.pointerLockElement===C||document.mozPointerLockElement===C||document.webkitPointerLockElement===C;a?(p.enabled=!0,z.style.display="none"):(p.enabled=!1,z.style.display="-webkit-box",z.style.display="-moz-box",z.style.display="box",A.style.display="")},E=function(){A.style.display=""};document.addEventListener("pointerlockchange",D,!1),document.addEventListener("mozpointerlockchange",D,!1),document.addEventListener("webkitpointerlockchange",D,!1),document.addEventListener("pointerlockerror",E,!1),document.addEventListener("mozpointerlockerror",E,!1),document.addEventListener("webkitpointerlockerror",E,!1),A.addEventListener("click",function(){A.style.display="none",C.requestPointerLock=C.requestPointerLock||C.mozRequestPointerLock||C.webkitRequestPointerLock,C.requestPointerLock()},!1)}else A.innerHTML="Your browser doesn't seem to support Pointer Lock API";b(),h()}(window);